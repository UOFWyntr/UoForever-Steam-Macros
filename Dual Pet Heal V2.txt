clearjournal
while not @findobject meta
  headmsg 'Select meta..' 43
  promptalias meta
endwhile
while not @findobject pet
  headmsg 'Select secondary pet..' 43
  promptalias pet
endwhile
if @timer metabandaid < 5200
  headmsg '**Already healing**' 55
  while @timer metabandaid < 5200
  endwhile
endif
while hits meta < maxhits or hits pet < maxhits
  //check to heal meta
  headmsg 'Checking meta health..' 43 meta
  while diffhits meta > diffhits pet
    if inrange meta 1
      //res check
      if hits meta < 1
        if hits meta == 0
          while hits meta == 0
            if @injournal 'are able to resurrect' system
              clearjournal
              replay
            endif
            sysmsg 'Attempting to res meta..' 43
            bandage meta
            while not @injournal 'fail to resurrect' system
              if @gumpexists 0x4da72c0
                headmsg 'Ressing' 56 meta
                replygump 0x4da72c0 1
                pause 500
                replay
              endif
              if hits meta > 0
                replay
              endif
            endwhile
            clearjournal
            pause 250
          endwhile
        endif
      endif
      //end res check
      if poisoned meta
        sysmsg 'Curing meta..' 43
        bandage meta
        createtimer metabandaid
        while not @injournal 'finish applying the' system
          if not inrange meta 2
            headmsg 'Out of range' 43 meta
            removetimer metabandaid
            clearjournal
            stop
          endif
          pause 500
        endwhile
        removetimer metabandaid
        clearjournal
      endif
      if hits meta < maxhits
        sysmsg 'Healing meta..' 43
        bandage meta
        createtimer metabandaid
        while not @injournal 'finish applying the' system
          if not inrange meta 2
            headmsg 'Out of range' 43 meta
            removetimer metabandaid
            clearjournal
            stop
          endif
          pause 500
        endwhile
        removetimer metabandaid
        clearjournal
      else
        headmsg '**Full Health**' 85 meta
      endif
    else
      headmsg 'Get closer!' 48 meta
      stop
    endif
  endwhile
  //check to see if heal pet
  headmsg 'Checking secondary pet health..' 43 pet
  while diffhits pet > diffhits meta
    if inrange pet 1
      //res check
      if hits pet < 1
        if hits pet == 0
          while hits pet == 0
            if @injournal 'are able to resurrect' system
              clearjournal
              replay
            endif
            sysmsg 'Attempting to res secondary pet..' 43
            bandage pet
            while not @injournal 'fail to resurrect' system
              if @gumpexists 0x4da72c0
                headmsg 'Ressing' 56 pet
                replygump 0x4da72c0 1
                pause 500
                replay
              endif
              if hits pet > 0
                replay
              endif
            endwhile
            clearjournal
            pause 250
          endwhile
        endif
      endif
      //end res check
      if poisoned pet
        sysmsg 'Curing secondary pet..' 43
        bandage pet
        createtimer metabandaid
        while not @injournal 'finish applying the' system
          if not inrange pet 2
            headmsg 'Out of range' 43 pet
            removetimer metabandaid
            clearjournal
            stop
          endif
          pause 500
        endwhile
        removetimer metabandaid
        clearjournal
      endif
      if hits pet < maxhits
        sysmsg 'Healing secondary pet..' 43
        bandage pet
        createtimer metabandaid
        while not @injournal 'finish applying the' system
          if not inrange pet 2
            headmsg 'Out of range' 43 pet
            removetimer metabandaid
            clearjournal
            stop
          endif
          pause 500
        endwhile
        removetimer metabandaid
        clearjournal
      else
        headmsg '**Full Health**' 85 pet
      endif
    else
      headmsg 'Get closer!' 48 pet
      stop
    endif
  endwhile
endwhile
headmsg '**Pets At Full Health**' 85
