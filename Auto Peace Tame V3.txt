//----------------------------------------------------------------//
//Auto Peace Tame V1 by Wyntr Â©2017
//----------------------------------------------------------------//
//Features:
//It can tell if a tame is attacking and will peace it.
//Auto walks after tame during taming.
//Range of script is 12 tiles.
//Targets closest first.
//Will repeace on failure after 5 seconds.
//Tame rename list for easy changing.
//Updates:
//V1
//Added tame war check.
//Tweaked taming routine to accomodate renames correctly.
//Revamped targeting routine.
//Added tamename list.
//Added if statement to break taming loop if tame goes into warmode.
//V2
//Removed peacetimer.
//Removed if statement breaking taming loop.
//Special Instructions:
//--------Tame Names------//
//To change the name of your tames rename, change inside the quotes where it say 'BBQ' down below inside of lists.
//if not listexists tamename
//  createlist tamename
//  pushlist tamename 'BBQ' <--edit name here
//endif
//--------Peaceables List------//
//The total number of tames in the pushlist section for peaceables, default is 44, has to be the number in the for loop directly below the pushlist.
//--------------------------------Setup--------------------------------//
@clearjournal
@cancelautotarget
@canceltarget
@unsetalias peacetarget
//--------------------------------Lists--------------------------------//
//TameName
if not listexists tamename
  createlist tamename
  pushlist tamename 'BBQ'
endif
//Tameables List
if not listexists peaceables
  createlist peaceables
endif
if not listexists tameables
  createlist tameables
  pushlist tameables 0x7 //Hellcat (Large)
  pushlist tameables 0x62 //Hellhound
  pushlist tameables 0xbc //Savage Ridgeback
  pushlist tameables 0xbb //Ridgeback
  pushlist tameables 0x17 //Dire Wolf
  pushlist tameables 0xce //Lava Lizard
  pushlist tameables 0x14 //Frost spider
  pushlist tameables 0xc9 //Hellcat (Small)
  pushlist tameables 0xda //Frenzied Ostard
  pushlist tameables 0x50 //Giant Toad
  pushlist tameables 0x22 //White Wolf
  pushlist tameables 0x25 //White Wolf2
  pushlist tameables 0x1c //Giant Spider
  pushlist tameables 0x41 //Snow leopard
  pushlist tameables 0x40 //Snow leopard
  pushlist tameables 0x19 //Gray wolf
  pushlist tameables 0x1b //Gray wolf2
  pushlist tameables 0x30 //Scorpion
  pushlist tameables 0xca //Alligator
  pushlist tameables 0x3f //Cougar
  pushlist tameables 0xd6 //Panther
  pushlist tameables 0xa7 //Brown Bear
  pushlist tameables 0xd3 //Black Bear
  pushlist tameables 0xdc //Llama
  pushlist tameables 0x124 //Pack Llama
  pushlist tameables 0x123 //Pack Horse
  pushlist tameables 0xc8 //Horse
  pushlist tameables 0xe2 //Horse2
  pushlist tameables 0xcc //Horse3
  pushlist tameables 0xe4 //Horse4
  pushlist tameables 0xed //Giant Rat
  pushlist tameables 0xdb //Forest Ostard
  pushlist tameables 0xd2 //Desert Ostard
  pushlist tameables 0x122 //Boar
  pushlist tameables 0xe1 //Timber Wolf
  pushlist tameables 0xed //Hind
  pushlist tameables 0x51 //Bullfrog
  pushlist tameables 0x1d //gorilla
  pushlist tameables 0xdd //Walrus
  pushlist tameables 0xd5 //Polar Bear
  pushlist tameables 0xd4 //Grizzly Bear
  pushlist tameables 0xe8 //Bull
  pushlist tameables 0xe9 //Bull2
  pushlist tameables 0xea //Great Hart
endif
//targeting distance
@clearlist distance
if not listexists distance
  @createlist distance
endif
pushlist distance 1
pushlist distance 2
pushlist distance 3
pushlist distance 4
pushlist distance 5
pushlist distance 6
pushlist distance 7
pushlist distance 8
pushlist distance 9
pushlist distance 10
pushlist distance 11
pushlist distance 12
//-------------------------------Instrument--------------------------------//
//Find Instrument
if not @findobject 'instrument'
  if @findtype '0xe9e' 'backpack' 'any' //Tambourine with red tassle
    @setalias 'instrument' 'found'
  elseif @findtype '0x2805' 'any' 'backpack' //Flute
    @setalias 'instrument' 'found'
    headmsg "Instrument set." '66'
    @useobject 'instrument'
  elseif @findtype '0xe9d' '0' 'backpack'//Tambourine
    @setalias 'instrument' 'found'
    @useobject 'instrument'
  elseif @findtype '0xe9c' '0' 'backpack' //Drum
    @setalias 'instrument' 'found'
    @useobject 'instrument'
  elseif @findtype '0xeb3' '0' 'backpack' //Lute
    @setalias 'instrument' 'found'
    @useobject 'instrument'
  elseif @findtype '0xeb2' '0' 'backpack' //Lap Harp
    @setalias 'instrument' 'found'
    @useobject 'instrument'
  elseif @findtype '0xeb1' '0' 'backpack' //Standing Harp
    @setalias 'instrument' 'found'
    useobject 'instrument'
  else
    headmsg 'No instrument found'
    stop
  endif
endif
//--------------------------------Tame Search--------------------------------//
//find tames from list
if not @findobject peacetarget
  for 0 to distance
    pushlist peaceables 0x7 //Hellcat (Large)
    pushlist peaceables 0x62 //Hellhound
    pushlist peaceables 0xbc //Savage Ridgeback
    pushlist peaceables 0xbb //Ridgeback
    pushlist peaceables 0x17 //Dire Wolf
    pushlist peaceables 0xce //Lava Lizard
    pushlist peaceables 0x14 //Frost spider
    pushlist peaceables 0xc9 //Hellcat (Small)
    pushlist peaceables 0xda //Frenzied Ostard
    pushlist peaceables 0x50 //Giant Toad
    pushlist peaceables 0x22 //White Wolf
    pushlist peaceables 0x25 //White Wolf2
    pushlist peaceables 0x1c //Giant Spider
    pushlist peaceables 0x41 //Snow leopard
    pushlist peaceables 0x40 //Snow leopard
    pushlist peaceables 0x19 //Gray wolf
    pushlist peaceables 0x1b //Gray wolf2
    pushlist peaceables 0x30 //Scorpion
    pushlist peaceables 0xca //Alligator
    pushlist peaceables 0x3f //Cougar
    pushlist peaceables 0xd6 //Panther
    pushlist peaceables 0xa7 //Brown Bear
    pushlist peaceables 0xd3 //Black Bear
    pushlist peaceables 0xdc //Llama
    pushlist peaceables 0x124 //Pack Llama
    pushlist peaceables 0x123 //Pack Horse
    pushlist peaceables 0xc8 //Horse
    pushlist peaceables 0xe2 //Horse2
    pushlist peaceables 0xcc //Horse3
    pushlist peaceables 0xe4 //Horse4
    pushlist peaceables 0xed //Giant Rat
    pushlist peaceables 0xdb //Forest Ostard
    pushlist peaceables 0xd2 //Desert Ostard
    pushlist peaceables 0x122 //Boar
    pushlist peaceables 0xe1 //Timber Wolf
    pushlist peaceables 0xed //Hind
    pushlist peaceables 0x51 //Bullfrog
    pushlist peaceables 0x1d //gorilla
    pushlist peaceables 0xdd //Walrus
    pushlist peaceables 0xd5 //Polar Bear
    pushlist peaceables 0xd4 //Grizzly Bear
    pushlist peaceables 0xe8 //Bull
    pushlist peaceables 0xe9 //Bull2
    pushlist peaceables 0xea //Great Hart
    for 44
      if @findtype peaceables[0] any ground 1 distance[]
        @setalias peacetarget found
        headmsg '**Tame Found**' 156 peacetarget
        break
      endif
      poplist peaceables front
    endfor
    for 0 to tameables
      if graphic peacetarget == tameables[]
        @setalias tametarget tameables[0]
        break
      endif
    endfor
    if @findobject peacetarget
      break
    endif
  endfor
endif
//no tames msg
if not @findobject peacetarget
  headmsg '**No Tames**' 32
  stop
endif
stop
//----------------------------Peace Routine-----------------------------//
//Peace if needed.
if war peacetarget
  if @inrange peacetarget 10
    while not @injournal 'play hypnotic music' system
      headmsg '**Peacing..**' 56 peacetarget
      useskill peacemaking
      pause 500
      //instrument check
      if @injournal 'instrument shall you' system
        pause 500
        target! instrument
        clearjournal
        pause 500
      endif
      //skill resuse timer
      if @injournal 'must wait a few moments to use' system
        headmsg '**Peace Not Ready**' 32
        @canceltarget
        clearjournal
        replay
      endif
      //target unseen check
      if @injournal 'cannot be seen' system
        headmsg '**Target Cannot Be Seen**' 32
        @canceltarget
        clearjournal
        stop
      endif
      //target tame for peace
      waitfortarget 5000
      target! peacetarget
      pause 500
      //failure check
      if @injournal 'play poorly, and there is no' system
        headmsg '**PEACE FAILURE**' 32 peacetarget
        sysmsg 'Retrying Peace in 5 seconds..' 32
        pause 5000
        clearjournal
        replay
      endif
      //final check for peace success
      if @injournal 'play hypnotic music' system or @injournal 'creature is already being' system
        if @injournal 'creature is already being' system
          headmsg '**Already Peaced**' 32 peacetarget
          warmode on
          warmode off
          clearjournal
          break
        else
          headmsg '!!Peace Succesful!!' 56 peacetarget
          createtimer peacetimer
          clearjournal
          pause 2500
          warmode on
          warmode off
          pause 2500
          break
        endif
      endif
    endwhile
  endif
endif
//----------------------------Taming Routine---------------------------//
if @findobject tametarget
  headmsg '**Tame Me**' 81 peacetarget
  while not war peacetarget
    if @inrange peacetarget 2
      useskill 'animal taming'
      waitfortarget 1000
      target! peacetarget
      //range check and movement
      if not @inrange 'peacetarget' 1
        if @x 'peacetarget' > x 'self' and @y 'peacetarget' > y 'self'
          walk 'Southeast'
        elseif @x 'peacetarget' < x 'self' and @y 'peacetarget' > y 'self'
          walk 'Southwest'
        elseif @x 'peacetarget' > x 'self' and @y 'peacetarget' < y 'self'
          walk 'Northeast'
        elseif @x 'peacetarget' < x 'self' and @y 'peacetarget' < y 'self'
          walk 'Northwest'
        elseif @x 'peacetarget' > x 'self' and @y 'peacetarget' == y 'self'
          walk 'East'
        elseif @x 'peacetarget' < x 'self' and @y 'peacetarget' == y 'self'
          walk 'West'
        elseif @x 'peacetarget' == x 'self' and @y 'peacetarget' > y 'self'
          walk 'South'
        elseif @x 'peacetarget' == x 'self' and @y 'peacetarget' < y 'self'
          walk 'North'
        endif
      endif
      //------------------------------Rename--------------------------------//
      //rename
      if name peacetarget != tamename[0]
        rename peacetarget tamename[0]
        pause 300
        if @injournal 'must wait a while longer to rename' system
          pause 1500
          clearjournal
        endif
      endif
      //release
      if name peacetarget == tamename[0]
        waitforcontext peacetarget 8 1000
        waitforgump 0x909cc741 1000
        //release gump
        if @replygump 0x909cc741 2
          headmsg '**Released**' 56 peacetarget
          ignoreobject peacetarget
          @unsetalias peacetarget
          pause 2000
          shownames mobiles
          // here is where you can loop the script of stop it
          //replay
          stop
        endif
      endif
    else
      headmsg '**Get Closer**' 56 peacetarget
      while not @inrange peacetarget 2
      endwhile
    endif
  endwhile
endif
replay
